#Область ОбработкаВходящегоСобытияССервераMS
Функция Invoke(ИмяСобытия, Параметры, ИдБазыСмартс)
		
	Попытка
		Если ИмяСобытия = "IBSessionStart" ИЛИ ИмяСобытия = "IBSessionStop" Тогда
			Возврат "";
		ИначеЕсли ИмяСобытия = "TestCallEmptyMethod" Тогда
			Возврат Строка(ТекущаяДата());
		КонецЕсли;	
		МодульОнлайн = КлеверенсТСД_МодульПовторногоИспользования.ПолучитьВнутреннююОбработку();
		МодульОнлайн.ЭтоWebСервис = Истина;
		
		Если Параметры = "AutoSerialization" Тогда
			Возврат "json";
		КонецЕсли;
		
		Если ТипЗнч(Параметры)=Тип("Строка") И Лев(Параметры,5)="<?xml" Тогда
			ОписаниеОшибки = "# Ошибка: #ONLEX006. Работа через веб-сервис возможна только в json формате. "
				+ "Перезапустите коннектор или службу сервера Mobile SMARTS. Если ошибка остаётся, установите в настройках коннектора формат обмена данными json.";			
			Возврат ОписаниеОшибки;
		КонецЕсли;
		
		Результат = КлеверенсТСД_МодульВебМетодов.REST_API_ВычислитьМетод(ИмяСобытия, Параметры, МодульОнлайн);
		
	Исключение
		ОписаниеОшибки = ОписаниеОшибки();
		Результат = "# Ошибка при выполнении события: "+ ИмяСобытия +", описание ошибки: "+ ОписаниеОшибки;
	КонецПопытки;
	
	Возврат Результат;
	
КонецФункции
#КонецОбласти