
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если НЕ Параметры.Свойство("Организация") Тогда
		Отказ=Истина;
		Возврат;
	КонецЕсли;
	
	Организация = Параметры.Организация;
	ТекущийАдресСервиса = ИнтеграцияWebKassaВызовСервера.АдресСервиса(Организация);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ВыполнитьСменуАдреса(Команда)
	
	ОчиститьСообщения();
	
	Если Не ПроверитьЗаполнение() Тогда
		Возврат;
	КонецЕсли;
	
	Если ИзменитьАдресСервиса(Организация, НовыйАдресСервиса) Тогда
		РезультатВыбора = Новый Структура("РезультатВыполнения", Истина);
		Закрыть(РезультатВыбора);
	Иначе
		ТекстСообщения = НСтр("ru = 'При изменении адреса сервиса произошла ошибка.
			|(Подробности см. в Журнале регистрации).'");
		
		ИнтеграцияWebKassaКлиентПереопределяемый.СообщитьПользователю(ТекстСообщения);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервереБезКонтекста
Функция ИзменитьАдресСервиса(Организация, НовыйАдресСервиса) Экспорт
	
	Возврат Справочники.НастройкиИнтеграцииWebKassa.ИзменитьАдресСервиса(Организация, НовыйАдресСервиса);
	
КонецФункции

#КонецОбласти
