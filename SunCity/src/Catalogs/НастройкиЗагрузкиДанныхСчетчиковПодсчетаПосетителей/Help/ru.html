<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html;charset=utf-8" http-equiv="content-type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<h2 style="COLOR: #1f4e79">Настройки счетчиков посетителей</h2>
<p>Для загрузки в систему количества посетителей используются файлы данных специальных систем подсчета посетителей, либо результаты ручного подсчета в файле определенного формата.</p>
<p><span style="FONT-WEIGHT: bold; COLOR: #0070c0">Список элементов</span> справочника открывается <b>Маркетинг – Посетители - Настройки загрузки данных счетчиков подсчета посетителей. </b>Загрузка файла производится с помощью внешней обработки согласно настройкам справочника. С помощью сервиса <b>Расширенный поиск (Alt+</b><b>F)</b>, Пользователь может выбрать нужные строки, задавая поиск по значениям различных реквизитов. Дополнительные команды доступны через кнопку <b>Еще</b>.</p>
<p></p>
<p><span style="FONT-WEIGHT: bold; COLOR: #0070c0">Новый элемент</span> вводится с помощью кнопки <b>Создать</b>. Пользователь может указать следующие настройки:</p>
<p></p>
<ul><li>
	<p style="MARGIN-LEFT: 25.5pt; TEXT-INDENT: -7.5pt"><b>Количество элементов в транзакции</b> – количество файлов, загружаемых за один сеанс;</p>
	</li>
	<li>
	<p style="MARGIN-LEFT: 25.5pt; TEXT-INDENT: -7.5pt"><b>Удалять успешно загруженные файлы</b> – позволяет управлять удалением файлов из каталога после успешной загрузки;</p>
	</li>
	<li>
	<p style="MARGIN-LEFT: 25.5pt; TEXT-INDENT: -7.5pt"><b>Заменять данные при повторной загрузке - 
	</b>при установленном флажке, загружаемые данные заменяют ранее загруженные данные. В противном случае данные, загруженные ранее, остаются без изменений;</p>
	</li>
	<li>
	<p style="MARGIN-LEFT: 25.5pt; TEXT-INDENT: -7.5pt"><b>Вид транспорта файлов</b> – система позволяет загружать данные из файлового или FTP-ресурса.</p>
	</li>
	<li>
	<p style="MARGIN-LEFT: 25.5pt; TEXT-INDENT: -7.5pt"><b>Каталог обмена информацией</b> – путь к папке для файлового обмена.</p>
	</li>
	<li>
	<p style="MARGIN-LEFT: 25.5pt; TEXT-INDENT: -7.5pt"><b>Проверить подключение</b> – команда для проверки FTP-соединения или файлового обмена.</p>
	</li>
	<li>
	<p style="MARGIN-LEFT: 25.5pt; TEXT-INDENT: -7.5pt"><b>Использовать регламентные задания – 
	</b>флажок для настройки расписания регламентного задания загрузки данных из счетчиков.</p>
	</li>
</ul><h3 style="COLOR: #1f4e79">Формат файла загрузки данных</h3>
<p style="MARGIN-LEFT: 15pt">Файл *.txt</p>
<p style="MARGIN-LEFT: 15pt">1-я строка: Технический код - реквизит справочника <a href="Catalog.СчетчикиПодсчетаПосетителей/Help">Счетчики подсчета посетителей</a>.</p>
<p style="MARGIN-LEFT: 15pt">2-я и последующие строки: «Дата_Время&lt;СимволТабуляции&gt;КоличествоВходящих&lt;СимволТабуляции&gt;КоличествоВыходящих»</p>
<p style="MARGIN-LEFT: 15pt">Дата_Время - дата и время в формате: «dd.MM.yyyy hh:mm:ss»</p>
<p style="MARGIN-LEFT: 15pt">КоличествоВходящих – число в формате 15.1</p>
<p style="MARGIN-LEFT: 15pt">КоличествоВыходящих – число в формате 15.1</p>
<p style="MARGIN-LEFT: 15pt">Все три составляющих разделяются символом табуляции.</p>
<h3 style="COLOR: #1f4e79">Требования к внешней обработке</h3>
<p style="MARGIN-LEFT: 15pt">Обработка должна содержать текстовый макет «ЗагрузкаДанных», в котором содержится алгоритм загрузки одного файла. Процедура загрузки данных запускается в модуле справочника «Настройки загрузки данных счетчиков подсчета посетителей». Переменные, используемые в алгоритме:</p>
<p style="MARGIN-LEFT: 15pt">МассивНайденныхФайлов – Массив переменных типа Файл.</p>
<p style="MARGIN-LEFT: 15pt">Для ведения лога загрузки рекомендуется использовать доступную процедуру ЗаписатьВЖурналИВыдатьСообщение(СтрокаСообщения, ЭтоОшибка), где:</p>
<p style="MARGIN-LEFT: 15pt">// СтрокаСообщения - Строка ошибки или информации,</p>
<p style="MARGIN-LEFT: 15pt">// ЭтоОшибка - Булево (Истина - ошибка, нет - информация).</p>
<p style="MARGIN-LEFT: 15pt">Рекомендуется в комментарий обработки поместить описание вида обработки. Например, «Обработка загрузки данных в подсистему "Регистрация подсчета посетителей" в формате ANTIvor».</p>
<p></p></body></html>